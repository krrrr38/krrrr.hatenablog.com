---
Title: メモ(SQL::Makerでのjoin，JSON::PP::Boolean)
Category:
- Perl
- メモ
Date: 2013-10-30T13:06:53+09:00
URL: https://krrrr.hatenablog.com/entry/2013/10/30/130653
EditURL: https://blog.hatena.ne.jp/krrrr/krrrr.hatenablog.com/atom/entry/12921228815711531076
---

** SQL::Makerでのjoin

いつも分からない，ってか無理☆だけど一応

欲しいSQL
>|sql|
SELECT comment.*, evaluation
    FROM comment LEFT JOIN comment_evaluation
        ON comment.uid = comment_evaluation.comment_id
    WHERE question_id = 1
    ORDER BY comment.created DESC;
||<

SQL::Maker使う
>|perl|
my $builder = SQL::Maker->new(driver => 'mysql');
$builder->select(
    undef,
    ['comment.*', 'evaluation'],
    { question_id => '1'},
    {
        order_by => 'created DESC',
        joins => [
            [comment => {
                type => 'LEFT',
                table => 'comment_evaluation',
                condition => 'comment.uid = comment_evaluation.comment_id'
            }],
        ],
    }
);
||<

** JSON::PP::Boolean
JSON::XS使ってjsonパースすると，bool値について，前までJSON::XS::Booleanが返ってきた．
これは直接以下のように書けた
>|perl|
if ($hoge){}
||<

昨日JSON::XSが3.0になった際に，bool値がJSON::PP::Booleanで返ってくるようになった．
これの条件判断は上記のように書いたままでは通らない．
実際に判定する際は以下のように書く
>|perl|
if ($$hoge){}
||<

詳しい事は知らないが誰得
