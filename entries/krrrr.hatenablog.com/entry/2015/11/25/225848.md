---
Title: JMX Example
Category:
- Java
Date: 2015-11-25T22:58:48+09:00
URL: https://krrrr.hatenablog.com/entry/2015/11/25/225848
EditURL: https://blog.hatena.ne.jp/krrrr/krrrr.hatenablog.com/atom/entry/6653586347146453025
---

JMX 見るだけじゃなくて、監視したい項目を自分で作れるように小さいサンプル

### codes

- `interface`:  `MBean`を末尾につける
```java
public interface SampleValueMBean {
    void setMessage(String msg);
    String getMessage();
    void printMessage();
}
```

- implementation
```java
public class SampleValue implements SampleValueMBean {
    private String message = "";
    @Override
    public void setMessage(String msg) {
        this.message = msg;
    }
    @Override
    public String getMessage() {
        return message;
    }
    @Override
    public void printMessage() {
        System.out.println("printMessage = " + message);
    }
}
```

- main
```java
MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();
SampleValueMBean mBean = new SampleValue();
ObjectName objectName = new ObjectName("com.krrrr38.sample:type=SampleValue");
mBeanServer.registerMBean(mBean, objectName);
// ... run continually
```

### monitoring
`jconsole`

 [f:id:krrrr:20151125225455p:plain]

普段はVisualVM派
